{% macro multiselect(label, items, input_name, selected=[], id_prefix="opt") %}
<div class="mb-3">
  <label class="form-label"><strong>{{ label }}</strong></label>
  <div class="dropdown w-100">
    <button class="btn btn-outline-secondary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown">
      Select {{ label }}
    </button>
    <ul class="dropdown-menu p-2 w-100" style="max-height:200px; overflow-y:auto;">
      {% for item in items %}
      <li>
        <div class="form-check">
          <input class="form-check-input" type="checkbox"
                 name="{{ input_name }}" value="{{ item }}"
                 id="{{ id_prefix }}_{{ loop.index }}"
                 {% if item in selected %}checked{% endif %}>
          <label class="form-check-label" for="{{ id_prefix }}_{{ loop.index }}">{{ item }}</label>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endmacro %}
